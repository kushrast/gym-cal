import React from 'react';
import parsePropsAsBulmaClasses from 'components/_utils/parsePropsAsBulmaClasses';

export default class BodyContainer extends React.Component {

  constructor(props) {
    super(props);
    this.container = React.createRef();
    this.pathname = '';
  }

  componentDidMount() {
    this.props.getRef(this.container.current);
    this.pathname = location.pathname;
  }

  getSnapshotBeforeUpdate() {
    return null;
  }

  componentDidUpdate() {
    if (this.pathname !== location.pathname) {
      this.pathname = location.pathname;
      this.container.current.scrollTo({
        'behavior': 'smooth',
        'left': 0,
        'top': 0
      });
    }
  }

  render() {

    let CSSClass = `body-container ${
      parsePropsAsBulmaClasses(this.props)
    }`;

    return (
      <div className={CSSClass} ref={this.container}>
        {this.props.children}
      </div>
    );
  }

};

BodyContainer.defaultProps = {
  getRef: () => {}
};
